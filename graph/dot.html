<head>
    <style>
        body {
            margin: 0;
        }

        img {
            width: 9%;
            /* height: 150px; */
            aspect-ratio: 1/1;
            margin: 2px;
            border: 1px solid gray;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <button onclick="window.location.href = `?from=${from-(to-from)}&to=${from}`">-</button>
    <span id="current"></span>
    <button onclick="window.location.href = `?from=${to}&to=${to+(to-from)}`">+</button>
    <div id="container"></div>

    <script>
        let from = parseInt(new URL(window.location).searchParams.get("from"));
        let to = parseInt(new URL(window.location).searchParams.get("to"));

        if (isNaN(from)) {
            from = 0;
        }
        if (isNaN(to)) {
            to = from + 100;
            // to = 8487;
        }
        document.getElementById("current").innerHTML = `${from} - ${to}`;

        function onImgClick(e) {
            let i = e.target.imgindex;
            e.preventDefault();

            let target;
            if (e.button == 2) {
                target = `./clusters/svg/${i}.svg`;
            } else {
                target = `/?i=${i}`;
            }

            if (e.shiftKey || e.ctrlKey || e.metaKey || e.button == 1) {
                window.open(target, '_blank');
            } else {
                document.location = target;
            }
        }

        function addImg(i) {
            var img = document.createElement('img');
            img.src = `./clusters/png/${i}.png`;
            img.imgindex = i;
            img.onclick = onImgClick;
            img.onauxclick = onImgClick;
            img.oncontextmenu = onImgClick;
            img.loading = "lazy";
            img.alt = i;
            document.getElementById('container').appendChild(img);
        }
        function addElement(text, type) {
            var node = document.createElement(type);
            node.innerHTML = text;
            document.getElementById('container').appendChild(node);
        }

        for (let i = from; i < to; i++) {
            if (i % 100 == 0) {
                addElement(i, "h2");
            } else if (i % 10 == 0) {
                addElement(null, "br");
                addElement(i, "span");
                addElement(null, "br");
            }
            addImg(i);
        }
    </script>
</body>